<h1>8. Analysis Package</h1>

<p>This section provides comprehensive documentation for reproducing the analysis presented in this paper. All code, data sources, and processing steps are fully documented to enable independent verification.</p>

<h2>8.1 Repository Structure</h2>

<div class="error-budget">
<pre>
TEP-GNSS-RINEX/
├── data/
│   ├── nav/                    # Broadcast navigation files
│   └── processed/              # Processed .npz time series
├── logs/                       # Processing logs
├── results/
│   ├── figures/                # Generated figures
│   ├── outputs/                # JSON analysis results
│   └── docs/                   # Documentation and manuscripts
├── scripts/
│   ├── steps/                  # Analysis pipeline scripts
│   │   ├── step_1_0_data_acquisition.py
│   │   ├── step_2_0_raw_spp_analysis.py
│   │   ├── step_2_2_anisotropy_analysis.py
│   │   └── step_2_3_kp_stratification.py
│   └── utils/                  # Utility modules
│       ├── config.py
│       └── data_alignment.py
├── site/                       # This manuscript website
├── requirements.txt            # Python dependencies
└── README.md                   # Quick start guide
</pre>
</div>

<h2>8.2 Data Acquisition</h2>

<h3>8.2.1 RINEX Observation Files</h3>

<p>Raw RINEX files are obtained from NASA CDDIS:</p>

<div class="error-budget">
<pre>
# Example: Download RINEX for station ZIMM, DOY 001, 2024
wget --ftp-user=anonymous --ftp-password=email@example.com \
  ftp://cddis.nasa.gov/archive/gnss/data/daily/2024/001/24o/zimm0010.24o.Z
</pre>
</div>

<h3>8.2.2 Broadcast Ephemerides</h3>

<p>Broadcast navigation messages are obtained from the same archive:</p>

<div class="error-budget">
<pre>
# Example: Download broadcast ephemeris for DOY 001, 2024
wget --ftp-user=anonymous --ftp-password=email@example.com \
  ftp://cddis.nasa.gov/archive/gnss/data/daily/2024/brdc/brdc0010.24n.Z
</pre>
</div>

<h2>8.3 Processing Pipeline</h2>

<h3>8.3.1 RTKLIB Single Point Positioning</h3>

<div class="error-budget">
<pre>
# Process RINEX file with RTKLIB
rnx2rtkp -p 0 -t -y 1 -o output.pos observation.24o brdc0010.24n

# Options:
#   -p 0    : Single Point Positioning mode
#   -t      : Output time format (yyyy/mm/dd hh:mm:ss.ss)
#   -y 1    : Solution status output level
#   -o file : Output file path
</pre>
</div>

<h3>8.3.2 Time Series Extraction</h3>

<div class="error-budget">
<pre>
# Python: Extract metrics from RTKLIB output
python scripts/steps/step_1_0_data_acquisition.py

# Extracts:
#   - Position jitter: dr = sqrt(dE² + dN² + dU²)
#   - Clock bias: Receiver clock offset (nanoseconds)
#   - Clock drift: d(clock)/dt
</pre>
</div>

<h3>8.3.3 Coherence Analysis</h3>

<div class="error-budget">
<pre>
# Run the main analysis
python scripts/steps/step_2_0_raw_spp_analysis.py

# Outputs:
#   - results/outputs/step_2_0_full_analysis.json
#   - results/figures/step_2_0_*.png
</pre>
</div>

<h2>8.4 Key Parameters</h2>

<table>
    <tr>
        <th>Parameter</th>
        <th>Value</th>
        <th>Description</th>
    </tr>
    <tr>
        <td><code>SAMPLING_PERIOD_SEC</code></td>
        <td>300</td>
        <td>Analysis processing interval (5 min)</td>
    </tr>
    <tr>
        <td><code>TEP_BAND_LOW_HZ</code></td>
        <td>10×10⁻⁶</td>
        <td>Low frequency cutoff (28 hours)</td>
    </tr>
    <tr>
        <td><code>TEP_BAND_HIGH_HZ</code></td>
        <td>500×10⁻⁶</td>
        <td>High frequency cutoff (33 minutes)</td>
    </tr>
    <tr>
        <td><code>MIN_DISTANCE_KM</code></td>
        <td>50</td>
        <td>Minimum station separation</td>
    </tr>
    <tr>
        <td><code>MAX_DISTANCE_KM</code></td>
        <td>13,000</td>
        <td>Maximum station separation</td>
    </tr>
    <tr>
        <td><code>N_BINS</code></td>
        <td>40</td>
        <td>Number of distance bins</td>
    </tr>
    <tr>
        <td><code>MIN_BIN_COUNT</code></td>
        <td>10</td>
        <td>Minimum pairs per bin</td>
    </tr>
    <tr>
        <td><code>NOISE_THRESHOLD_NS</code></td>
        <td>50</td>
        <td>Station quality filter</td>
    </tr>
</table>

<h2>8.5 Dependencies</h2>

<h3>8.5.1 Python Requirements</h3>

<div class="error-budget">
<pre>
# requirements.txt
numpy>=1.24.0
scipy>=1.10.0
matplotlib>=3.7.0
tqdm>=4.65.0
requests>=2.28.0
</pre>
</div>

<h3>8.5.2 External Software</h3>

<ul>
    <li><strong>RTKLIB:</strong> v2.4.3 or later (<a href="https://github.com/tomojitakasu/RTKLIB">github.com/tomojitakasu/RTKLIB</a>)</li>
    <li><strong>Python:</strong> 3.10 or later</li>
    <li><strong>Node.js:</strong> 18+ (for site building only)</li>
</ul>

<h2>8.6 Output Files</h2>

<h3>8.6.1 JSON Results</h3>

<p>The primary analysis output is a JSON file containing all fit parameters, statistics, and metadata:</p>

<div class="error-budget">
<pre>
{
  "clock_bias": {
    "correlation_length_km": [X],
    "correlation_length_err_km": [Y],
    "amplitude": [A],
    "offset": [C0],
    "r_squared": [R2]
  },
  "clock_drift": { ... },
  "pos_jitter": { ... },
  "metadata": {
    "n_stations": [N],
    "n_pairs": [N],
    "date_range": "[START] to [END]"
  }
}
</pre>
</div>

<h3>8.6.2 Figures</h3>

<p>Generated figures are saved to <code>results/figures/</code>:</p>
<ul>
    <li><code>step_2_0_clock_bias.png</code> — Clock bias coherence vs distance</li>
    <li><code>step_2_0_clock_drift.png</code> — Clock drift coherence vs distance</li>
    <li><code>step_2_0_pos_jitter.png</code> — Position jitter coherence vs distance</li>
    <li><code>step_2_0_summary.png</code> — Combined summary figure</li>
</ul>

<h2>8.7 Quick Start</h2>

<div class="experimental-section">
    <h3>Reproduce in 5 Steps</h3>
    <ol>
        <li>Clone the repository: <code>git clone https://github.com/matthewsmawfield/TEP-GNSS-RINEX</code></li>
        <li>Install dependencies: <code>pip install -r requirements.txt</code></li>
        <li>Install RTKLIB and ensure <code>rnx2rtkp</code> is in PATH</li>
        <li>Run data acquisition: <code>python scripts/steps/step_1_0_data_acquisition.py</code></li>
        <li>Run analysis: <code>python scripts/steps/step_2_0_raw_spp_analysis.py</code></li>
    </ol>
    <p>Results will be generated in <code>results/outputs/</code> and <code>results/figures/</code>.</p>
</div>

<h2>8.8 Citation</h2>

<p>If you use this analysis package, please cite:</p>

<div class="error-budget">
<pre>
@article{smawfield2025rinex,
  title={Global Time Echoes: Raw RINEX Validation of Distance-Structured Correlations in GNSS Clocks},
  author={Smawfield, Matthew Lukin},
  journal={Preprint},
  year={2025},
  doi={10.5281/zenodo.17860167},
  url={https://matthewsmawfield.github.io/TEP-GNSS-RINEX/}
}
</pre>
</div>
